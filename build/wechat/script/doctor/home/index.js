!function e(t,a,o){function r(s,d){if(!a[s]){if(!t[s]){var l="function"==typeof require&&require;if(!d&&l)return l(s,!0);if(n)return n(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=a[s]={exports:{}};t[s][0].call(c.exports,function(e){var a=t[s][1][e];return r(a?a:e)},c,c.exports,e,t,a,o)}return a[s].exports}for(var n="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(e,t,a){function o(){$.ajax({url:"/hospital/queryScheduleByDoctorPage.htm",type:"POST",data:{doctorId:v,deptId:I},success:function(e){e.code?promptUtil.alert({content:e.message,type:"alert"}):s(e.schedualInfoDtoList)},complete:function(){$('[data-role="cancle-doing"]').addClass("none")}})}function r(){$.ajax({url:"/doctor/queryDoctorInfo.htm",type:"POST",data:{doctorId:v},success:function(e){e.code?promptUtil.alert({content:e.message,type:"alert"}):n(e.map)}})}function n(e){var t=[];i=e.doctorName,_=e.hospName,b=e.hospId,h=e.focusFlag,t.push('<div class="my_con_pic"><img src="/common/image/'+e.imageId+'.htm" width="138" height="137"></div>','<div class="my_con_text">','<p class="t_name">'+e.doctorName+'<span class="t_name_o">'+e.doctorLevel+"</span></p>",'<p class="amount">预约量:'+(e.regtAmt<0?0:e.regtAmt)+' | 关注量:<span data-view="focusNumber">'+(e.focusAmt<0?0:e.focusAmt)+"</span></p>",'<p class="hos_cp"><i>'+w+"</i>"+(w?" | ":"")+"<i>"+e.hospName+"</i></p>",'<a href="javascript:;" data-role="focus">'+("1"==e.focusFlag?"取消关注":"关注")+"</a></div>"),$('[data-role="titleInfo"]').append(t.join("")),$('[data-role="skill"]').append(e.skill||"")}function s(e){var t=[];$.each(e,function(e,a){t.push(['<li data-deptId="'+a.deptId+'" data-deptName="'+a.deptName+'" data-ampmtype="'+a.ampmType+'" data-dateWeekAmPm="'+a.dateWeekAmPm+'" data-date="'+a.outDate+'" data-flag="'+a.timeFlag+'" data-fee="'+a.regfee+'" data-role="'+x[a.outStatus].style+'" class="mar_lr28" data-treatId="'+a.schedualId+'" data-outdate="'+a.outDate+'"><h1>'+a.dateWeekAmPm+"</h1><h2>"+(0!=a.numberType?"专家":"普通")+"  ￥"+a.regfee+"元</h2><h2>"+(a.deptName||"")+' </h2><a href="javascript:;" class="'+x[a.outStatus].style+'">'+x[a.outStatus].state+"</a></li>"].join(""))}),$('[data-role="schedule"]').append(t.join(""))}function d(){$.ajax({url:"/doctor/followOrCancleDoctor.htm",type:"POST",data:{hospId:b,doctorId:v,isFollow:1*!+h,deptId:I},success:function(e){if(e.code)promptUtil.alert({content:e.message,type:"alert"});else{+h?(h=0,$("[data-role=focus]").text("关注")):(h=1,$("[data-role=focus]").text("取消关注"));var t=+$('[data-view="focusNumber"]').text()+1*[-1,1][h];$('[data-view="focusNumber"]').text(t<0?0:t)}}})}function l(){$('[data-role="cancle-doing"]').css("top",document.body.scrollTop+$(window).height()/3).removeClass("none"),$.ajax({url:"/order/queryNumberResourcesByType.htm",type:"POST",data:{hospId:b,deptId:I,doctorId:v,numberBeginDate:m,numberEndDate:m,ampmType:p},success:function(e){if(e.code&&1500!=e.code)return promptUtil.alert({content:e.message,type:"alert"}),!1;var t=[];t.push('<h2 class="reg_tips_title">'+f+'</h2><ul style="-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);-webkit-overflow-scrolling:touch;overflow-scrolling:touch;">'),$.each(e.list,function(e,a){jumpHrefa=k+"&timeSlot="+a.timeSlot+"&resourceId="+a.schedualId+"&numberType＝"+a.numberType,confirmHtml=t.push('<li class="'+(0==a.numberRemaNum?" no_order ":"")+'">',a.numberRemaNum>0?"<a href="+jumpHrefa+' target="_blank">':"",a.timeSlot+"  剩余:"+a.numberRemaNum,a.numberRemaNum>0?"</a>":"","</li>")}),t.push('</ul><div class="reg_tops_cancle" data-role="cancel"><a href="javascript:;">取消</a></div>'),$("#fade").css("display","block").removeClass("none").on("touchmove",function(e){e.preventDefault()}),$('[data-role="titleInfo"]').css("position","relative"),$("#light").html(t.join("")),$("#light").show().removeClass("none"),S=document.body.scrollTop,$("body").addClass("overflow_h").css("position","fixed").css("top",S*-1);var a=$("#light").height(),o=$("#light").find("li").length;$(window).height();$("#light").css("margin-top",a/2*-1),o>5&&($("#light").find("ul").addClass("scroll"),$("#light").css("margin-top","-17rem"))},complete:function(){$('[data-role="cancle-doing"]').addClass("none")}})}function c(){$.ajax({url:"/user/queryUserInfo.htm",type:"POST",success:function(e){1e3==e.code?$(document).trigger("loginKit_login"):e.code||d()}})}var i,u,m,p,f,h,y,g=TaoGu.APP.Utility,v=g.Network.queryString("doctorId"),b=g.Network.queryString("hospId"),I=g.Network.queryString("deptId"),_=g.Network.queryString("hospName"),w=g.Network.queryString("deptName"),N=g.Network.queryString("patientId")||"",k="",S=0,h=0,x={0:{style:"order_blue_btn",state:"挂号"},1:{style:"order_stop_btn",state:"停诊"},2:{style:"order_full_btn",state:"约满"},3:{style:"order_blue_btn",state:"预约挂号"},4:{style:"order_blue_btn",state:"当日挂号"}};$("#light").css("display","none"),$("body").on("click",'[data-role="cancel"]',function(){$("#light").css("display","none"),$("#fade").css("display","none"),$("body").removeClass("overflow_h").removeAttr("style"),document.body.scrollTop=S}),$("body").on("click",'[data-role="focus"]',function(e){c()}),$("body").on("click",'[data-role="order_blue_btn"]',function(){var e=$(this).data("flag");u=$(this).data("fee"),m=$(this).data("date"),f=$(this).data("dateweekampm"),y=$(this).data("outdate"),p=$(this).data("ampmtype"),I=$(this).data("deptid"),w=$(this).data("deptname"),k="/wechat/html/appointment/confirm/?hospId="+b+"&deptId="+I+"&doctorId="+v+"&date="+m+"&ampmtype="+p+"&timeStart="+y+"&timeEnd="+y+"&regAmt="+u+"&hospitaName="+encodeURIComponent(_)+"&departmentName="+encodeURIComponent(w)+"&doctorName="+encodeURIComponent(i)+"&patientId="+N,e?l():location.href=k}),$('[data-role="cancel"]').on("click",function(){$("#light").addClass("none"),$("#fade").addClass("none")}),o(),r()},{}]},{},[1]);