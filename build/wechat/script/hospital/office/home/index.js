!function t(e,o,a){function r(d,l){if(!o[d]){if(!e[d]){var s="function"==typeof require&&require;if(!l&&s)return s(d,!0);if(n)return n(d,!0);throw new Error("Cannot find module '"+d+"'")}var i=o[d]={exports:{}};e[d][0].call(i.exports,function(t){var o=e[d][1][t];return r(o?o:t)},i,i.exports,t,e,o,a)}return o[d].exports}for(var n="function"==typeof require&&require,d=0;d<a.length;d++)r(a[d]);return r}({1:[function(t,e,o){function a(){$('[data-role="cancle-doing"]').show(),$.ajax({url:"/hospital/queryScheduleByDoctorPage.htm",type:"POST",data:{doctorId:y,deptId:w},success:function(t){t.code?promptUtil.alert({content:t.message,type:"alert"}):(_=t.doctorName,d(t.schedualInfoDtoList))},complete:function(){$('[data-role="cancle-doing"]').hide()}})}function r(){$.ajax({url:"/doctor/queryDoctorInfo.htm",type:"POST",data:{doctorId:y},success:function(t){t.code?promptUtil.alert({content:t.message,type:"alert"}):n(t.map)}})}function n(t){$('[data-role="image"]').html('<img src="/common/image/'+t.imageId+'.htm" width="138" height="137">'),$('[data-role="drName"]').text(v+"普通号"),$('[data-role="regtAmt"]').text("预约量:"+t.regtAmt),$('[data-role="hospName"]').text(I),$('[data-role="deptName"]').text(v)}function d(t){var e=[];$.each(t,function(t,o){e.push(['<li data-ampmtype="'+o.ampmType+'" data-dateWeekAmPm="'+o.dateWeekAmPm+'" data-date="'+o.outDate+'" data-flag="'+o.timeFlag+'" data-fee="'+o.regfee+'" data-role="'+k[o.outStatus].style+'" class="mar_lr28" data-treatId="'+o.schedualId+'" data-outdate="'+o.outDate+'"><h1>'+o.dateWeekAmPm+"</h1><h2>"+o.numberType+"  ￥"+o.regfee+'元 </h2><a href="javascript:;" class="'+k[o.outStatus].style+'">'+k[o.outStatus].state+"</a></li>"].join(""))}),$('[data-role="list"]').append(e.join(""))}function l(){$.ajax({url:"/doctor/followOrCancleDoctor.htm",type:"POST",data:{hospId:b,doctorId:y,isFollow:1*!+h,deptId:w},success:function(t){if(t.code)promptUtil.alert({content:t.message,type:"alert"});else{+h?(h=0,$("[data-role=focus]").text("关注")):(h=1,$("[data-role=focus]").text("取消关注"));var e=+$('[data-view="focusNumber"]').text()+1*[-1,1][h];$('[data-view="focusNumber"]').text(e<0?0:e)}}})}function s(){$('[data-role="cancle-doing"]').css("top",document.body.scrollTop+$(window).height()/3).show(),$.ajax({url:"/order/queryNumberResourcesByType.htm",type:"POST",data:{hospId:b,deptId:w,doctorId:y,numberBeginDate:u,numberEndDate:u,ampmType:m},success:function(t){if(t.code)return promptUtil.alert({content:t.message,type:"alert"}),!1;if(!t.code){var e=[];e.push('<h2 class="reg_tips_title">'+p+'</h2><ul style="-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);-webkit-overflow-scrolling:touch;overflow-scrolling:touch;">'),$.each(t.list,function(t,o){S=S+"&timeSlot="+o.timeSlot+"&resourceId="+o.schedualId+"&numberType="+o.numberType,confirmHtml=e.push('<li class="'+(0==o.numberRemaNum?" no_order ":"")+'">',o.numberRemaNum>0?"<a href="+S+">":"",o.timeSlot+"  剩余:"+o.numberRemaNum,o.numberRemaNum>0?"</a>":"","</li>")}),e.push('</ul><div class="reg_tops_cancle" data-role="cancel"><a href="javascript:;">取消</a></div>'),$("#light").html(e.join("")),$("#light").show().removeClass("none"),$("#fade").show().removeClass("none").on("touchmove",function(t){t.preventDefault()}),x=document.body.scrollTop,$("body").addClass("overflow_h").css("position","fixed").css("top",x*-1);var o=$("#light").height(),a=$("#light").find("li").length;$("#light").css("margin-top",o/2);$(window).height();$("#light").css("margin-top",o/2*-1),a>5&&($("#light").find("ul").addClass("scroll"),$("#light").css("margin-top","-17rem"))}},complete:function(){$('[data-role="cancle-doing"]').hide()}})}function i(){$.ajax({url:"/user/queryUserInfo.htm",type:"POST",success:function(t){1e3==t.code?$(document).trigger("loginKit_login"):t.code||l()}})}var c,u,m,p,h,f,g=TaoGu.APP.Utility,y=g.Network.queryString("doctorId"),b=g.Network.queryString("hospId"),w=g.Network.queryString("deptId"),I=g.Network.queryString("hospName"),v=g.Network.queryString("deptName"),N=g.Network.queryString("patientId")||"",_=g.Network.queryString("doctorName")||"",S="",x=0,h=0,k={0:{style:"order_blue_btn",state:"挂号"},1:{style:"order_stop_btn",state:"停诊"},2:{style:"order_full_btn",state:"约满"},3:{style:"order_blue_btn",state:"预约挂号"},4:{style:"order_blue_btn",state:"当日挂号"}};$("#light").css("display","none"),$("body").on("click",'[data-role="cancel"]',function(){$("#light").css("display","none"),$("#fade").css("display","none")}),$("body").on("click",'[data-role="focus"]',function(t){i()}),$("body").on("click",'[data-role="order_blue_btn"]',function(){var t=$(this).data("flag");c=$(this).data("fee"),u=$(this).data("date"),p=$(this).data("dateweekampm"),f=$(this).data("outdate"),m=$(this).data("ampmtype"),S="/wechat/html/appointment/confirm/?hospId="+b+"&deptId="+w+"&doctorId="+y+"&date="+u+"&ampmtype="+m+"&timeStart="+f+"&timeEnd="+f+"&regAmt="+c+"&hospitaName="+encodeURIComponent(I)+"&departmentName="+encodeURIComponent(v)+"&doctorName="+encodeURIComponent(_)+"&patientId="+N,1==t?s():location.href=S}),$('[data-role="cancel"]').on("click",function(){$("#light").addClass("none"),$("#fade").addClass("none"),$("body").removeClass("overflow_h").removeAttr("style"),document.body.scrollTop=x}),a(),r()},{}]},{},[1]);