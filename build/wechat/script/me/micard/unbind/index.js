!function t(e,r,a){function i(o,l){if(!r[o]){if(!e[o]){var d="function"==typeof require&&require;if(!l&&d)return d(o,!0);if(n)return n(o,!0);throw new Error("Cannot find module '"+o+"'")}var s=r[o]={exports:{}};e[o][0].call(s.exports,function(t){var r=e[o][1][t];return i(r?r:t)},s,s.exports,t,e,r,a)}return r[o].exports}for(var n="function"==typeof require&&require,o=0;o<a.length;o++)i(a[o]);return i}({1:[function(t,e,r){var a=function(){var t=TaoGu.APP.Utility,e=t.Network.queryString("micard"),r=(t.Network.queryString("patientId"),t.Network.queryString("backto"),!0),a=!0,i={$phoneNo:$('[data-role="phoneNo"]'),$msg:$('[data-role="msg"]'),$btnMsg:$('[data-role="btnMsg"]'),$miCardNo:$('[data-role="miCardNo"]'),$btn:$('[data-role="btn"]'),btnDisabled:!0,prevalidAll:function(){var t=!0,e=$.trim(this.$phoneNo.val()),r=$.trim(this.$msg.val()),a=$.trim(this.$miCardNo.val());return t&&!e.length&&(t=!1),t&&!r.length&&(t=!1),t&&!a.length&&(t=!1),t},validAll:function(){var t=!0,e=$.trim(this.$phoneNo.val()),r=$.trim(this.$msg.val()),a=$.trim(this.$miCardNo.val());t&&!taoguKit.valid.mobile(e)&&(promptUtil.toast("手机格式不正确"),t=!1),t&&!taoguKit.valid.msgCode(r,e)&&(promptUtil.toast("验证码格式不正确"),t=!1),t&&!taoguKit.valid.miCard(a)&&(promptUtil.toast("医保卡格式不正确"),t=!1);var i=taoguKit.valid.getMsgCode(e,r);return t&&!i.ret&&(promptUtil.alert({content:i.message,type:"alert"}),t=!1),t},bindEvt:function(){$('[data-role="msg"]').attr("disabled",!0).addClass("disabled").val("");this.$phoneNo.add(this.$msg).add(this.$miCardNo).on("input",function(t){var e=this;e.prevalidAll()?(e.$btn.removeClass("disabled").removeAttr("disabled"),e.btnDisabled=!1):(e.$btn.addClass("disabled").attr("disabled",!0),e.btnDisabled=!0)}.bind(this)),this.$btnMsg.on("tap",function(t){return!this.lock&&(!(!r||!a)&&(this.lock=!0,void $.ajax({url:"/security/smscoderequest.htm",data:{phoneNo:this.$phoneNo.val(),type:6},type:"POST",success:function(e){if(e.code)return promptUtil.alert({content:e.message,type:"alert"}),!1;$('[data-role="msg"]').removeAttr("disabled").removeClass("disabled"),$(t.target).attr("disabled",!0).css("color","#484747");var a=59,i=$(t.target).val();r=!1;var n=setInterval(function(){a>=1?$(t.target).val("重新获取 "+a--+"s"):(r=!0,clearInterval(n),$(t.target).val(i).removeAttr("style").removeAttr("disabled"))}.bind(this),1e3)}.bind(this),complete:function(){this.lock=!1}.bind(this)})))}.bind(this)),this.$btn.on("tap",function(e){return!this.lock&&!this.btnDisabled&&(this.lock=!0,void $.ajax({url:"/user/unBindSICard.htm",type:"POST",data:{memberId:t.Network.queryString("patientId"),SICardNo:this.$miCardNo.val()},success:function(t){t.code?promptUtil.alert({content:t.message,type:"alert"}):(promptUtil.alert({content:"解除绑定成功！",type:"alert"}),$('[data-role="btn"]').addClass("disabled"),"btnMsg"!=$("[data-role]")&&$("input").attr("readonly","readonly"),$("input").attr("readonly","readonly"),a=!1)},complete:function(){this.lock=!1}.bind(this)}))}.bind(this))}};return{init:function(){$('[data-role="micard"]').html($('[data-role="micard"]').html().replace(/#card#/,e)),i.bindEvt()}}}();a.init()},{}]},{},[1]);