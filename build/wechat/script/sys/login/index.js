!function t(e,n,i){function a(r,s){if(!n[r]){if(!e[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+r+"'")}var d=n[r]={exports:{}};e[r][0].call(d.exports,function(t){var n=e[r][1][t];return a(n?n:t)},d,d.exports,t,e,n,i)}return n[r].exports}for(var o="function"==typeof require&&require,r=0;r<i.length;r++)a(i[r]);return a}({1:[function(t,e,n){var i=function(){var t=TaoGu.APP.Utility,e=t.Network.queryString("tel"),n=t.Network.queryString("backto"),i=t.Network.queryString("go"),a={$tel:$('[data-role="tel"]'),$pw:$('[data-role="pw"]'),$forgot:$('[data-role="forgot"]'),$btn:$('[data-role="btn"]'),$reg:$('[data-role="reg"]'),btnDisabled:!0,renderData:function(){e&&this.$tel.val(e),this.$forgot.attr("href",this.$forgot.attr("href")+"?backto="+encodeURIComponent(n)+"&go="+encodeURIComponent(i)),this.$reg.attr("href",this.$reg.attr("href")+"?backto="+encodeURIComponent(n)+"&go="+encodeURIComponent(i)),this.bindEvt()},valid:function(t,e){return t.test(e)},btnValidRules:function(){var t="";return/^1\d{10}$/.test(this.$tel.val())||(t="手机号格式输入有误"),t||window.taoguKit.valid.passwordFormat(this.$pw.val())||(t="密码格式输入有误"),t?(promptUtil.toast(t),this.lock=!0,!1):void(this.lock=!1)},bindEvt:function(){this.$tel.add(this.$pw).on("input propertyChange",function(t){this.$tel.val()&&this.$pw.val()?(this.$btn.removeClass("disabled").removeAttr("disabled"),this.btnDisabled=!1):(this.$btn.addClass("disabled").attr("disabled",!0),this.btnDisabled=!0)}.bind(this)),this.$btn.on("click",function(t){return a.btnValidRules(),!this.lock&&!this.btnDisabled&&(this.lock=!0,void $.ajax({url:"/security/login.htm",type:"POST",data:{phoneNo:this.$tel.val(),password:window.MD5(this.$pw.val())},success:function(t){t.code?promptUtil.alert({content:t.message,type:"alert"}):($(".mask").show(),$(".pop_patients").show(),a.fetchPatientList())},complete:function(){this.lock=!1}.bind(this)}))}.bind(this))},fetchPatientList:function(){$.ajax({url:"/familyMember/queryMyMembers.htm",type:"POST",success:function(t){t.code?promptUtil.alert({content:t.message,type:"alert"}):a.renderPatientList(t.familflist)},error:function(){}}),$('[data-role="patient"]').on("click",'[data-role="pNameList"]',function(t){var e=$(t.target).data("id"),a=$(t.target).data("name");return!!e&&void $.ajax({url:"/security/savePatientId.htm",type:"POST",data:{patientId:e},success:function(t){},complete:function(){i?location.href=i+(i.indexOf("?")==-1?"?":"&")+"backto="+encodeURIComponent(n)+"&patientId="+e+"&patientName="+a:n?location.href=n+(n.indexOf("?")==-1?"?":"&")+"patientId="+e+"&patientName="+a:history.go(-1)}})})},renderPatientList:function(t){var e="";$.each(t,function(t,n){e+="<li data-role='pNameList' data-id='"+n.tmPId+"' data-name="+n.pName+">"+n.pName+"</li>"}),$('[data-role="patient"]').append(e)}};return{init:function(){a.renderData()}}}();i.init()},{}]},{},[1]);